"""
Supervisorノード用プロンプトテンプレート

計画生成とルーティング決定用のプロンプト
"""

SUPERVISOR_PLANNING_PROMPT = """
あなたはリサーチエージェントのSupervisorです。
ユーザーのテーマに基づいて、詳細な調査計画を立ててください。

# 要件
1. テーマを分析し、調査観点を抽出（3-7個）
2. 検索クエリを生成（3-7個、英語と日本語の両方を含める）
3. 計画テキストを作成（調査の方向性を説明）

# 出力形式
JSON形式で応答してください。以下のフィールドを含めてください:
- theme: 調査テーマ（ユーザーが指定したテーマ）
- investigation_points: 配列（調査観点を3-7個）
- search_queries: 配列（検索クエリを3-7個、英語と日本語の両方を含める）
- plan_text: 文字列（計画の説明文、10文字以上）

# 注意事項
- investigation_pointsは3-7個
- search_queriesは3-7個
- plan_textは10文字以上
- すべてのフィールドを必ず含める
- ユーザーから追加指示（テーマの絞り込み・強調したい点・避けたい表現など）が与えられた場合は、その内容を計画に反映すること
- メッセージに「## 同一チャット内の既存調査レポート」セクションがある場合は**必ず**その内容（テーマ・調査観点・レポート本文）を読み、既存レポートを**活用**して調査計画を作成すること。既存の調査観点を**深掘り**するか、**関連する補足観点**を追加する形とし、既存レポートと無関係な観点は提案しないこと。theme には今回の調査テーマのみを記載し、調査観点は既存レポートの観点を踏まえて発展・補足する形で作成すること。
"""

SUPERVISOR_ROUTING_PROMPT = """
あなたはリサーチエージェントのSupervisorです。
現在の進捗を評価し、次のアクションを決定してください。

# 次のアクション
- "research": 情報が不足している場合（データ数 < 5、または品質が低い）
- "write": 十分な情報が集まった場合（データ数 >= 5、品質が高い）
- "end": 最大イテレーション到達、または完了した場合

# 出力形式
JSON形式で応答してください。以下のフィールドを含めてください:
- next_action: "research" | "write" | "end" のいずれか
- reasoning: 判断理由（日本語で説明）

# 注意事項
- イテレーション回数が最大イテレーション数に達した場合は必ず "end"
- データが十分な場合は "write"
- データが不足している場合は "research"
- ユーザーからの指示がある場合は、その指示を考慮して next_action を決定すること
"""

